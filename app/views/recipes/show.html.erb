<%= render 'shared/navigation', post: @post%>

<h1> <%= @recipe.name %> </h1>

<div>
Cooking time: <%= @recipe.cooking_time%> <br>
Preparation time: <%= @recipe.preparation_time%>
</div>

<p> 
How to prepare <%= @recipe.name %>: <br>
<%= @recipe.description%> 
</p>

<div>
       <% if can? :manage, @recipe %>
       <%= button_to 'Change Visibility', toggle_visible_path(id: @recipe.id), method: :post %>
      <% end %>
is this recipe public?: <%= @recipe.public? %>
</div>

<div>
      <%= button_to 'Generate Shopping List'%>
      <% if can? :manage, @recipe %>
        <%= link_to 'Add ingredient', new_recipe_recipe_food_path(@recipe) %>
      <% end %>  
</div>

<table class="table table-striped">
<thead>
  <tr>
      <th>Food</th>
      <th>Quatity</th>
      <th>Price</th>
      <th>Actions</th>
  </tr>
</thead>
<tbody>
      <% @recipe.recipe_foods.each do |recipe_food| %>
      <tr>
        <td><%= recipe_food.food.name %></td>
        <td><%= recipe_food.quantity %></td>
        <td><%= recipe_food.food.price * recipe_food.quantity%></td>
        <td>
              <% if can? :manage, @recipe %>
              <%= link_to 'Edit', edit_recipe_recipe_food_path(@recipe, recipe_food) %>
              <%= button_to 'Delete', recipe_recipe_food_path(@recipe, recipe_food), method: :delete, data: { confirm: 'Are you sure?' } %>
                  <% end %>
      </tr>
      <% end %>
</tbody>
</table>



